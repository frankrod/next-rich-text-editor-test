{"ast":null,"code":"import _Object$getPrototypeOf from 'babel-runtime/core-js/object/get-prototype-of';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport autobind from 'class-autobind';\nimport cx from 'classnames';\nimport React, { Component } from 'react';\nimport { Entity } from 'draft-js';\nimport styles from './ImageSpan.css'; // TODO: Use a more specific type here.\n\nvar ImageSpan = function (_Component) {\n  _inherits(ImageSpan, _Component);\n\n  function ImageSpan(props) {\n    _classCallCheck(this, ImageSpan);\n\n    var _this = _possibleConstructorReturn(this, (ImageSpan.__proto__ || _Object$getPrototypeOf(ImageSpan)).call(this, props));\n\n    autobind(_this);\n    var entity = props.contentState.getEntity(props.entityKey);\n\n    var _entity$getData = entity.getData(),\n        width = _entity$getData.width,\n        height = _entity$getData.height;\n\n    _this.state = {\n      width: width,\n      height: height\n    };\n    return _this;\n  }\n\n  _createClass(ImageSpan, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var _state = this.state,\n          width = _state.width,\n          height = _state.height;\n      var entity = this.props.contentState.getEntity(this.props.entityKey);\n      var image = new Image();\n\n      var _entity$getData2 = entity.getData(),\n          src = _entity$getData2.src;\n\n      image.src = src;\n\n      image.onload = function () {\n        if (width == null || height == null) {\n          // TODO: isMounted?\n          _this2.setState({\n            width: image.width,\n            height: image.height\n          });\n\n          Entity.mergeData(_this2.props.entityKey, {\n            width: image.width,\n            height: image.height,\n            originalWidth: image.width,\n            originalHeight: image.height\n          });\n        }\n      };\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _state2 = this.state,\n          width = _state2.width,\n          height = _state2.height;\n      var className = this.props.className;\n      var entity = this.props.contentState.getEntity(this.props.entityKey);\n\n      var _entity$getData3 = entity.getData(),\n          src = _entity$getData3.src;\n\n      className = cx(className, styles.root);\n      var imageStyle = {\n        verticalAlign: 'bottom',\n        backgroundImage: 'url(\"' + src + '\")',\n        backgroundSize: width + 'px ' + height + 'px',\n        lineHeight: height + 'px',\n        fontSize: height + 'px',\n        width: width,\n        height: height,\n        letterSpacing: width\n      };\n      return React.createElement('span', {\n        className: className,\n        style: imageStyle,\n        onClick: this._onClick\n      }, this.props.children);\n    }\n  }, {\n    key: '_onClick',\n    value: function _onClick() {\n      console.log('image clicked');\n    }\n  }, {\n    key: '_handleResize',\n    value: function _handleResize(event, data) {\n      var _data$size = data.size,\n          width = _data$size.width,\n          height = _data$size.height;\n      this.setState({\n        width: width,\n        height: height\n      });\n      Entity.mergeData(this.props.entityKey, {\n        width: width,\n        height: height\n      });\n    }\n  }]);\n\n  return ImageSpan;\n}(Component);\n\nexport default ImageSpan;","map":{"version":3,"sources":["/Users/franklinrodriguez/Desktop/next-test/node_modules/react-rte/lib/ui/ImageSpan.js"],"names":["_Object$getPrototypeOf","_classCallCheck","_createClass","_possibleConstructorReturn","_inherits","autobind","cx","React","Component","Entity","styles","ImageSpan","_Component","props","_this","__proto__","call","entity","contentState","getEntity","entityKey","_entity$getData","getData","width","height","state","key","value","componentDidMount","_this2","_state","image","Image","_entity$getData2","src","onload","setState","mergeData","originalWidth","originalHeight","render","_state2","className","_entity$getData3","root","imageStyle","verticalAlign","backgroundImage","backgroundSize","lineHeight","fontSize","letterSpacing","createElement","style","onClick","_onClick","children","console","log","_handleResize","event","data","_data$size","size"],"mappings":"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","sourcesContent":["import _Object$getPrototypeOf from 'babel-runtime/core-js/object/get-prototype-of';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport autobind from 'class-autobind';\nimport cx from 'classnames';\nimport React, { Component } from 'react';\nimport { Entity } from 'draft-js';\n\nimport styles from './ImageSpan.css';\n\n// TODO: Use a more specific type here.\n\nvar ImageSpan = function (_Component) {\n  _inherits(ImageSpan, _Component);\n\n  function ImageSpan(props) {\n    _classCallCheck(this, ImageSpan);\n\n    var _this = _possibleConstructorReturn(this, (ImageSpan.__proto__ || _Object$getPrototypeOf(ImageSpan)).call(this, props));\n\n    autobind(_this);\n    var entity = props.contentState.getEntity(props.entityKey);\n\n    var _entity$getData = entity.getData(),\n        width = _entity$getData.width,\n        height = _entity$getData.height;\n\n    _this.state = {\n      width: width,\n      height: height\n    };\n    return _this;\n  }\n\n  _createClass(ImageSpan, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var _state = this.state,\n          width = _state.width,\n          height = _state.height;\n\n      var entity = this.props.contentState.getEntity(this.props.entityKey);\n      var image = new Image();\n\n      var _entity$getData2 = entity.getData(),\n          src = _entity$getData2.src;\n\n      image.src = src;\n      image.onload = function () {\n        if (width == null || height == null) {\n          // TODO: isMounted?\n          _this2.setState({ width: image.width, height: image.height });\n          Entity.mergeData(_this2.props.entityKey, {\n            width: image.width,\n            height: image.height,\n            originalWidth: image.width,\n            originalHeight: image.height\n          });\n        }\n      };\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _state2 = this.state,\n          width = _state2.width,\n          height = _state2.height;\n      var className = this.props.className;\n\n      var entity = this.props.contentState.getEntity(this.props.entityKey);\n\n      var _entity$getData3 = entity.getData(),\n          src = _entity$getData3.src;\n\n      className = cx(className, styles.root);\n      var imageStyle = {\n        verticalAlign: 'bottom',\n        backgroundImage: 'url(\"' + src + '\")',\n        backgroundSize: width + 'px ' + height + 'px',\n        lineHeight: height + 'px',\n        fontSize: height + 'px',\n        width: width,\n        height: height,\n        letterSpacing: width\n      };\n\n      return React.createElement(\n        'span',\n        {\n          className: className,\n          style: imageStyle,\n          onClick: this._onClick\n        },\n        this.props.children\n      );\n    }\n  }, {\n    key: '_onClick',\n    value: function _onClick() {\n      console.log('image clicked');\n    }\n  }, {\n    key: '_handleResize',\n    value: function _handleResize(event, data) {\n      var _data$size = data.size,\n          width = _data$size.width,\n          height = _data$size.height;\n\n      this.setState({ width: width, height: height });\n      Entity.mergeData(this.props.entityKey, { width: width, height: height });\n    }\n  }]);\n\n  return ImageSpan;\n}(Component);\n\nexport default ImageSpan;"]},"metadata":{},"sourceType":"module"}